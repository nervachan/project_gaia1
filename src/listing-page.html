<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listing Page</title>
    <link href="/css/output.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <script src="/src/Watchlist.js" defer></script>
</head>
<body class="bg-gray-100">

    <header>
        <nav class="bg-gray-800">
            <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
              <div class="relative flex h-16 items-center justify-between">
                <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
                  <!-- Mobile menu button-->
                  <button type="button" class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-controls="mobile-menu" aria-expanded="false">
                    <span class="absolute -inset-0.5"></span>
                    <span class="sr-only">Open main menu</span>
                    <!--
                      Icon when menu is closed.
          
                      Menu open: "hidden", Menu closed: "block"
                    -->
                    <svg class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                    </svg>
                    <!--
                      Icon when menu is open.
          
                      Menu open: "block", Menu closed: "hidden"
                    -->
                    <svg class="hidden h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
                <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
                  <div class="flex flex-shrink-0 items-center">
                    <h3 class="text-gray-100">Project:Gaia</h3>
                  </div>
                  <div class="hidden sm:ml-6 sm:block">
                    <div class="flex space-x-4">
                      <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                      <a href="#" class="rounded-md  hover:bg-gray-700  px-3 py-2 text-sm font-medium text-white" aria-current="page">Home</a>
                      <a href="/src/become-lender.html" class="rounded-md px-3 py-2 text-sm font-medium hover:bg-gray-700 text-gray-300 hover:text-white">Become a lender</a>
                      <a href="/src/seller-hub-main.html" class="rounded-md px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white">Seller Hub</a>
                      <a href="/src/History.html" class="rounded-md px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white">History</a>
                      <a href="/src/watch-list.html" class="rounded-md px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white">Watch List</a>
                    </div>
                  </div>
                </div>
                <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
                  <button type="button" class="relative rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800">
                    <span class="absolute -inset-1.5"></span>
                    <span class="sr-only">View notifications</span>
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0" />
                    </svg>
                  </button>
          
                  <!-- Profile dropdown -->
                  <div class="relative ml-3">
                    <div>
                      <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-300 hover:bg-gray-700 hover:text-white"id="welcome-message"></a>
                    </div>
          
                    <!--
                      Dropdown menu, show/hide based on menu state.
          
                      Entering: "transition ease-out duration-100"
                        From: "transform opacity-0 scale-95"
                        To: "transform opacity-100 scale-100"
                      Leaving: "transition ease-in duration-75"
                        From: "transform opacity-100 scale-100"
                        To: "transform opacity-0 scale-95"
                    -->
                    
                  </div>
                </div>
              </div>
            </div>
          
            <!-- Mobile menu, show/hide based on menu state. -->
            <div class="sm:hidden" id="mobile-menu">
              <div class="space-y-1 px-2 pb-3 pt-2">
                <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                <a href="/src/client-login.html" class="rounded-md  hover:bg-gray-700  px-3 py-2 text-sm font-medium text-white" aria-current="page">Home</a>
                <a href="/src/become-lender.html" class="rounded-md px-3 py-2 text-sm font-medium bg-gray-900 text-gray-300 hover:text-white">Become a lender</a>
                <a href="/src/seller-hub-main.html" class="rounded-md px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white">Seller Center</a>
                <a href="/src/History.html" class="rounded-md px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white">History</a>
                <a href="/src/watch-list.html" class="rounded-md px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white">Watch List</a>
              </div>
            </div>
          </nav>
    </header>
    
    
    <main class="container mx-auto mt-6">
      <div id="listing-details-container" class="bg-white shadow-lg rounded-lg flex">
          <!-- Listing details will be dynamically inserted here -->
          <div class="flex-1 p-6">
              <img src="/images/listing-placeholder1.png" alt="Product Image" class="rounded-lg w-full" id="item-image">
          </div>
          <div class="flex-1 p-6">
              <h2 class="text-xl font-semibold" id="item-title">Product Title</h2>
              <p class="text-2xl text-red-600 mt-2" id="item-price">100.00</p>
              <p class="mt-4" id="item-description">This is a brief description of the product. It highlights key features and benefits.</p>
              <div class="mt-6">
                  <button id="rent-button" class="bg-blue-800 text-white py-2 px-4 rounded hover:bg-blue-900">Rent</button>
                  <button class="add-to-watchlist bg-blue-800 text-white py-2 px-4 rounded hover:bg-blue-900 "
                          data-item="Igorot-Insipred Gown"
                          data-image="/images/listing-placeholder1.png">Add to Watchlist
                  </button>
              </div>
          </div>
      </div>
  
      <section class="bg-white mt-6 p-4 rounded-lg shadow">
          <h3 class="text-lg font-semibold">Returns</h3>
          <p>Please return after date of usage.</p>
      </section>
  </main>

    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between">
                <!-- Footer Content -->
            </div>
        </div>
    </footer>

    <script>
        // Handle Rent Button Click
        document.getElementById('rent-button').addEventListener('click', function() {
            // Get item details
            const itemTitle = document.getElementById('item-title').innerText;
            const itemPrice = document.getElementById('item-price').innerText;
            const itemDescription = document.getElementById('item-description').innerText;
            const itemImage = document.getElementById('item-image').src;

            // Create an object to hold the item details
            const itemDetails = {
                title: itemTitle,
                price: itemPrice,
                description: itemDescription,
                image: itemImage
            };

            // Store the item details in localStorage
            localStorage.setItem('listingData', JSON.stringify(itemDetails));
            // Redirect to the confirm order page
            window.location.href = 'client-confirm-order.html';
        });
    </script>

<!-- Dynamic Showing of Listing -->
<script>
  // Function to get the details of the listing and update the page content
  function loadListingDetails() {
      // Get the listing ID or index from the URL query string (assuming it's passed as a parameter)
      const urlParams = new URLSearchParams(window.location.search);
      const listingIndex = urlParams.get('index');  // or use 'id' if that's what you're passing

      if (listingIndex === null) {
          alert('Listing not found.');
          return;
      }

      // Fetch listings from localStorage
      const listings = JSON.parse(localStorage.getItem('listings')) || [];
      const listing = listings[listingIndex];

      if (!listing) {
          alert('Listing not found.');
          return;
      }

      // Update the page with the listing details
      const itemImage = document.getElementById('item-image');
      const itemTitle = document.getElementById('item-title');
      const itemPrice = document.getElementById('item-price');
      const itemDescription = document.getElementById('item-description');
      const rentButton = document.getElementById('rent-button');

      // Update the content
      itemImage.src = listing.image || '/images/listing-placeholder1.png';  // Default if no image is available
      itemTitle.textContent = listing.productName || 'Product Title';
      itemPrice.textContent = listing.rentPrice ? `$${listing.rentPrice}` : 'Not Available';  // Show rent price if available
      itemDescription.textContent = listing.productDescription || 'Description not available.';

      // Event listener for Rent button (optional, can redirect or show modal)
      rentButton.addEventListener('click', () => {
          alert('Rent button clicked!');
          // You can implement rent functionality here, e.g., redirect to a form or open a modal
      });

      // Handle Add to Watchlist functionality (you can store watchlist in localStorage as well)
      const addToWatchlistButton = document.querySelector('.add-to-watchlist');
      addToWatchlistButton.addEventListener('click', () => {
          // Assuming you have a function to handle adding items to a watchlist
          const watchlist = JSON.parse(localStorage.getItem('watchlist')) || [];
          watchlist.push({
              productName: listing.productName,
              image: listing.image,
              productDescription: listing.productDescription,
          });
          localStorage.setItem('watchlist', JSON.stringify(watchlist));

          alert(`${listing.productName} added to watchlist!`);
      });
  }

  // Call the function when the page loads
  window.onload = loadListingDetails;
</script>
</body>
</html>